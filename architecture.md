
## LogSim Architecture Diagram - Detailed Design Specification

### Overall System Architecture (Left to Right Pipeline)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Raw Log   â”‚â”€â”€â”€â–¶â”‚    Template      â”‚â”€â”€â”€â–¶â”‚    Columnar      â”‚â”€â”€â”€â–¶â”‚   Compression    â”‚â”€â”€â”€â–¶â”‚   Queryable     â”‚
â”‚   Sources   â”‚    â”‚   Extraction     â”‚    â”‚    Encoding      â”‚    â”‚    Pipeline      â”‚    â”‚    Storage      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Pipeline Flow**: 6 main stages with data transformations at each step

**Total Compression**: 36.52 MB â†’ 3.18 MB = **11.47Ã— compression**

**Query Performance**: Selective field decompression without full reconstruction

---

## Stage 1: Raw Log Sources (Left Side)

### Visual Layout
- **Main Box**: White background, thin border
- **Title**: "Log Sources" (centered, bold)
- **Icon**: Server/database stack (3 stacked cylinders)
- **Dimensions**: 200px width Ã— 600px height

### 5 Dataset Boxes (Stacked Vertically Inside)

Each dataset box should show:
- **Color-coded border** (3px thick)
- **Dataset name** (bold, 14pt)
- **Log format preview** (monospace font, 10pt)
- **Statistics** (gray text, 9pt)

#### Dataset 1: Apache (Orange #FF8C42)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ  Apache Web Server Logs               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [TIMESTAMP] [SEVERITY] MESSAGE          â”‚
â”‚                                         â”‚
â”‚ Example:                                â”‚
â”‚ [Thu Jun 09 06:07:04 2005] [notice]    â”‚
â”‚ LDAP: Built with OpenLDAP               â”‚
â”‚                                         â”‚
â”‚ ğŸ“Š 51,978 logs | 4.75 MB                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Dataset 2: HealthApp (Blue #4A90E2)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”µ Android Health App Logs              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TIMESTAMP|COMPONENT|PID|MESSAGE         â”‚
â”‚                                         â”‚
â”‚ Example:                                â”‚
â”‚ 20171223-22:15:29:606|Step_LSC|         â”‚
â”‚ 30002312|onStandStepChanged 3579        â”‚
â”‚                                         â”‚
â”‚ ğŸ“Š 212,394 logs | 19.53 MB              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Dataset 3: Zookeeper (Green #7ED321)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢ Zookeeper Coordination Service       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TIMESTAMP - SEVERITY [THREAD] MESSAGE   â”‚
â”‚                                         â”‚
â”‚ Example:                                â”‚
â”‚ 2015-07-29 17:41:41,536 - INFO         â”‚
â”‚ [main:QuorumPeerConfig@101] - Reading  â”‚
â”‚                                         â”‚
â”‚ ğŸ“Š 74,273 logs | 9.84 MB                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Dataset 4: Proxifier (Purple #BD10E0)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ£ Proxifier Network Proxy Logs         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [TIMESTAMP] PROCESS - HOST:PORT ACTION  â”‚
â”‚                                         â”‚
â”‚ Example:                                â”‚
â”‚ [10.30 16:49:06] chrome.exe -           â”‚
â”‚ proxy.cse.cuhk.edu.hk:5070 close        â”‚
â”‚                                         â”‚
â”‚ ğŸ“Š 21,320 logs | 2.40 MB                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Total Statistics Box (Bottom)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ˆ Total Corpus Statistics              â”‚
â”‚ â€¢ 359,965 log entries                   â”‚
â”‚ â€¢ 36.52 MB uncompressed                 â”‚
â”‚ â€¢ 4 distinct log formats                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Arrow to Next Stage
- **Style**: Thick black arrow (8px)
- **Label above arrow**: "Unstructured text logs"
- **Label below arrow**: "360K entries (359,965 logs)"

---

## Stage 2: Template Extraction Pipeline (Center-Left)

### Visual Layout
- **Main Box**: Dashed red border (#E74C3C, 3px dashed)
- **Title**: "Template Extraction Engine"
- **Background**: Light gray (#F8F9FA)
- **Dimensions**: 350px width Ã— 600px height

### Sub-Stage 2.1: Tokenization

**Box Style**: White background, solid border

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘  TOKENIZATION                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Algorithm: Delimiter-based splitting                â”‚
â”‚            + Bracket-pair matching                  â”‚
â”‚                                                     â”‚
â”‚ Input (raw log):                                    â”‚
â”‚ [Thu Jun 09 06:07:04 2005] [notice] LDAP: Built    â”‚
â”‚                                                     â”‚
â”‚ Output (tokens):                                    â”‚
â”‚ ["[Thu Jun 09 06:07:04 2005]", "[notice]",        â”‚
â”‚  "LDAP:", "Built", "with", "OpenLDAP"]            â”‚
â”‚                                                     â”‚
â”‚ âš™ï¸ Techniques:                                      â”‚
â”‚ â€¢ FSM for bracket matching                         â”‚
â”‚ â€¢ Quote-aware splitting                            â”‚
â”‚ â€¢ Multi-delimiter detection                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Arrow down** with label: "Tokenized log entries"

### Sub-Stage 2.2: Semantic Classification

**Box Style**: Light blue background (#E8F4F8)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¡ SEMANTIC CLASSIFICATION                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Algorithm: Regex pattern matching                   â”‚
â”‚            + Confidence scoring (0.0-1.0)          â”‚
â”‚                                                     â”‚
â”‚ 15 Semantic Type Categories:                       â”‚
â”‚                                                     â”‚
â”‚ ğŸ• TIMESTAMP      ğŸ“¡ IP_ADDRESS    âš ï¸ SEVERITY      â”‚
â”‚ âš™ï¸ PROCESS_ID     ğŸ”Œ PORT          ğŸ“ FILE_PATH     â”‚
â”‚ ğŸŒ URL            ğŸ“§ EMAIL         âŒ ERROR_CODE    â”‚
â”‚ ğŸ“Š METRIC         ğŸ”§ COMPONENT     ğŸ¬ ACTION         â”‚
â”‚ ğŸ‘¤ USER_ID        ğŸ”— SESSION_ID    ğŸ’¬ MESSAGE        â”‚
â”‚                                                     â”‚
â”‚ Example Classification:                            â”‚
â”‚ "[Thu Jun 09 06:07:04 2005]" â†’ TIMESTAMP (0.95)   â”‚
â”‚ "[notice]"                   â†’ SEVERITY (1.0)     â”‚
â”‚ "LDAP:"                      â†’ COMPONENT (0.7)    â”‚
â”‚ "Built with OpenLDAP"        â†’ MESSAGE (1.0)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Arrow down** with label: "Semantically typed tokens"

### Sub-Stage 2.3: Custom Alignment-Based Template Extraction

**Box Style**: Light yellow background (#FFF9E6)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¢ CUSTOM ALIGNMENT ALGORITHM                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Algorithm: Position-by-position field alignment    â”‚
â”‚                                                     â”‚
â”‚ Step 1: Group by Structure                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚ Group logs by:                           â”‚       â”‚
â”‚ â”‚ â€¢ Field count (e.g., 10 tokens)         â”‚       â”‚
â”‚ â”‚ â€¢ Token patterns (brackets, quotes)      â”‚       â”‚
â”‚ â”‚ â€¢ Semantic type combinations             â”‚       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                     â”‚
â”‚ Step 2: Position-by-Position Alignment             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚ Log 1: [Thu Jun 09] [notice] LDAP: Builtâ”‚       â”‚
â”‚ â”‚ Log 2: [Thu Jun 09] [notice] LDAP: SSL  â”‚       â”‚
â”‚ â”‚ Log 3: [Thu Jun 09] [error]  Apache: OK â”‚       â”‚
â”‚ â”‚                                          â”‚       â”‚
â”‚ â”‚ Position 0: [TIMESTAMP] (100% constant)  â”‚       â”‚
â”‚ â”‚ Position 1: [SEVERITY]  (100% constant)  â”‚       â”‚
â”‚ â”‚ Position 2: LDAP/Apache (67% LDAP)       â”‚       â”‚
â”‚ â”‚ Position 3: [MESSAGE]   (0% constant)    â”‚       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                     â”‚
â”‚ Step 3: Constant vs Variable Detection             â”‚
â”‚ â€¢ Threshold: >80% identical â†’ constant token       â”‚
â”‚ â€¢ <80% identical â†’ variable field [TYPE]           â”‚
â”‚                                                     â”‚
â”‚ Output Template: "[TIMESTAMP] [SEVERITY]           â”‚
â”‚                   [COMPONENT]: [MESSAGE]"          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Arrow down** with label: "Aligned templates"

### Sub-Stage 2.4: Template Consolidation

**Box Style**: Light green background (#E8F8F5)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘£ TEMPLATE CONSOLIDATION                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Algorithm: Signature-based deduplication           â”‚
â”‚                                                     â”‚
â”‚ Problem: Alignment may generate similar templates: â”‚
â”‚                                                     â”‚
â”‚ Template A: "[TIMESTAMP] [SEVERITY] LDAP: Built    â”‚
â”‚             with [MESSAGE]"                        â”‚
â”‚ Template B: "[TIMESTAMP] [SEVERITY] LDAP:          â”‚
â”‚             [MESSAGE] with OpenLDAP"               â”‚
â”‚                                                     â”‚
â”‚ Solution: Merge by semantic signature:             â”‚
â”‚                                                     â”‚
â”‚ Signature = (TIMESTAMP, SEVERITY, COMPONENT,       â”‚
â”‚              MESSAGE) at positions (0, 1, 2, 3)    â”‚
â”‚                                                     â”‚
â”‚ Both templates â†’ Same signature â†’ MERGE            â”‚
â”‚                                                     â”‚
â”‚ Final Template: "[TIMESTAMP] [SEVERITY]            â”‚
â”‚                  COMPONENT: [MESSAGE]"             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Stage 2 Output Box (Bottom)

**Box Style**: White background, thick green border (#27AE60, 4px solid)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ EXTRACTED SCHEMAS (by dataset)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Apache:     19 templates from 52K logs              â”‚
â”‚ HealthApp:   2 templates from 212K logs             â”‚
â”‚ Zookeeper:  30 templates from 74K logs              â”‚
â”‚ Proxifier:  26 templates from 21K logs              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total: 77 unique templates from 360K logs           â”‚
â”‚ Schema discovery: 100% automatic (no manual config) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Arrow to Next Stage
- **Style**: Thick black arrow (8px)
- **Label above**: "Structured log templates"
- **Label below**: "77 templates with semantic field types"

---

## Stage 3: Columnar Encoding Pipeline (Center)

### Visual Layout
- **Main Box**: Dashed red border (#E74C3C, 3px dashed)
- **Title**: "Category-Aware Columnar Encoding"
- **Background**: Light gray (#F8F9FA)
- **Dimensions**: 400px width Ã— 600px height

### Sub-Stage 3.1: Field Extraction

**Box Style**: White background

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘  FIELD EXTRACTION                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Algorithm: Template-guided parsing                  â”‚
â”‚                                                     â”‚
â”‚ Transform logs into columnar structure:            â”‚
â”‚                                                     â”‚
â”‚ Template T001: [TIMESTAMP] [SEVERITY] LDAP: [MSG] â”‚
â”‚                                                     â”‚
â”‚ Row-oriented logs:                                 â”‚
â”‚ logâ‚: [Thu Jun 09 06:07:04] [notice] LDAP: Built  â”‚
â”‚ logâ‚‚: [Thu Jun 09 06:07:05] [error]  LDAP: Failed â”‚
â”‚ logâ‚ƒ: [Thu Jun 09 06:07:19] [notice] LDAP: SSL    â”‚
â”‚                                                     â”‚
â”‚ â†“ Transform to columns â†“                           â”‚
â”‚                                                     â”‚
â”‚ Columnar data:                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ Timestamp   â”‚ Severity â”‚ Comp  â”‚ Message       â”‚â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚ â”‚ 1117962424  â”‚ notice   â”‚ LDAP  â”‚ Built with... â”‚â”‚
â”‚ â”‚ 1117962425  â”‚ error    â”‚ LDAP  â”‚ Failed to...  â”‚â”‚
â”‚ â”‚ 1117962439  â”‚ notice   â”‚ LDAP  â”‚ SSL support...â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Arrow down** with label: "Logs decomposed into typed columns"

### Sub-Stage 3.2: Delta Encoding (for Timestamps)

**Box Style**: Light orange background (#FFF3E0)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¡ DELTA ENCODING (Timestamps)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Algorithm: Store differences between consecutive    â”‚
â”‚            values instead of absolute values        â”‚
â”‚                                                     â”‚
â”‚ Original timestamps (8 bytes each):                â”‚
â”‚ [1117962424, 1117962429, 1117962432, 1117962439]   â”‚
â”‚ Size: 4 Ã— 8 = 32 bytes                             â”‚
â”‚                                                     â”‚
â”‚ Delta encoding:                                     â”‚
â”‚ Base: 1117962424 (8 bytes)                         â”‚
â”‚ Deltas: [5, 3, 7] (1-2 bytes each with varint)    â”‚
â”‚ Size: 8 + 3 = 11 bytes                             â”‚
â”‚                                                     â”‚
â”‚ Compression ratio: 32 / 11 = 2.9Ã—                  â”‚
â”‚                                                     â”‚
â”‚ âš¡ Why it works: Logs are chronologically ordered   â”‚
â”‚    â†’ Small deltas (typically 1-60 seconds)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Sub-Stage 3.3: Zigzag + Varint Encoding

**Box Style**: Light blue background (#E3F2FD)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¢ ZIGZAG + VARINT ENCODING (Integers)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Step 1: Zigzag (handle negative deltas)            â”‚
â”‚                                                     â”‚
â”‚ Signed â†’ Unsigned mapping:                         â”‚
â”‚   0 â†’ 0,  -1 â†’ 1,   1 â†’ 2,  -2 â†’ 3,   2 â†’ 4       â”‚
â”‚                                                     â”‚
â”‚ Formula: zigzag(n) = (n << 1) ^ (n >> 31)         â”‚
â”‚                                                     â”‚
â”‚ Step 2: Varint (variable-length encoding)          â”‚
â”‚                                                     â”‚
â”‚ Use 7 bits for value + 1 bit for continuation:    â”‚
â”‚                                                     â”‚
â”‚ Value    Binary          Varint bytes              â”‚
â”‚ â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚ 1        0000_0001       [0x01]      (1 byte)     â”‚
â”‚ 127      0111_1111       [0x7F]      (1 byte)     â”‚
â”‚ 128      1000_0000       [0x80 0x01] (2 bytes)    â”‚
â”‚ 16384    0100_0000_0000  [0x80 0x80 0x01] (3 B)   â”‚
â”‚                                                     â”‚
â”‚ Compression ratio: 4.0Ã— (4 bytes â†’ 1 byte avg)    â”‚
â”‚                                                     â”‚
â”‚ ğŸ“š Used in: Protocol Buffers, MessagePack, Parquet â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Sub-Stage 3.4: Dictionary Encoding (Low-Cardinality)

**Box Style**: Light purple background (#F3E5F5)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘£ DICTIONARY ENCODING (Severity, Components, IPs)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Algorithm: Value â†’ Integer ID mapping              â”‚
â”‚                                                     â”‚
â”‚ When to use: Fields with <1000 unique values       â”‚
â”‚                                                     â”‚
â”‚ Example: Severity field (52K logs)                 â”‚
â”‚                                                     â”‚
â”‚ Original array (7 bytes avg Ã— 52K):                â”‚
â”‚ ["ERROR", "INFO", "ERROR", "WARN", "INFO", ...]    â”‚
â”‚ Size: 364 KB                                       â”‚
â”‚                                                     â”‚
â”‚ Dictionary + IDs:                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚ â”‚ Dictionary       â”‚                               â”‚
â”‚ â”‚ 0 â†’ "ERROR"      â”‚                               â”‚
â”‚ â”‚ 1 â†’ "INFO"       â”‚                               â”‚
â”‚ â”‚ 2 â†’ "WARN"       â”‚                               â”‚
â”‚ â”‚ 3 â†’ "DEBUG"      â”‚                               â”‚
â”‚ â”‚ 4 â†’ "FATAL"      â”‚                               â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                                     â”‚
â”‚ Encoded IDs (varint, 1 byte each):                 â”‚
â”‚ [0, 1, 0, 2, 1, 0, 1, 3, ...]                      â”‚
â”‚ Size: 50 bytes (dict) + 52 KB (IDs) = 52.05 KB    â”‚
â”‚                                                     â”‚
â”‚ Compression ratio: 364 / 52 = 7.0Ã—                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Sub-Stage 3.5: RLE v2 (Run-Length Encoding)

**Box Style**: Light green background (#E8F5E9)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¤ RLE v2 (Pattern Detection - ORC Format)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Algorithm: Detect repeated patterns & encode       â”‚
â”‚            as (value, count) or (pattern, repeats) â”‚
â”‚                                                     â”‚
â”‚ Three encoding modes:                              â”‚
â”‚                                                     â”‚
â”‚ 1ï¸âƒ£ SHORT_REPEAT: Same value repeated               â”‚
â”‚    [5, 5, 5, 5, 5, 5]                              â”‚
â”‚    â†’ (mode=SHORT_REPEAT, value=5, count=6)         â”‚
â”‚                                                     â”‚
â”‚ 2ï¸âƒ£ PATCHED_BASE: Values close to base              â”‚
â”‚    [1000, 1001, 1003, 1007, 1002]                  â”‚
â”‚    â†’ (mode=PATCHED_BASE, base=1000,                â”‚
â”‚        deltas=[0,1,3,7,2])                         â”‚
â”‚                                                     â”‚
â”‚ 3ï¸âƒ£ DIRECT: Random values (no pattern)              â”‚
â”‚    [1, 7, 3, 9, 2]                                 â”‚
â”‚    â†’ (mode=DIRECT, values=[1,7,3,9,2])             â”‚
â”‚                                                     â”‚
â”‚ Use case: Process IDs, sequential counters        â”‚
â”‚ Compression ratio: 2.6Ã—                            â”‚
â”‚                                                     â”‚
â”‚ ğŸ“š Reference: Apache ORC File Format Spec          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Sub-Stage 3.6: MessagePack Serialization

**Box Style**: Light cyan background (#E0F7FA)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¥ MESSAGEPACK SERIALIZATION                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Algorithm: Binary serialization (compact than JSON)â”‚
â”‚                                                     â”‚
â”‚ JSON format (89 bytes):                            â”‚
â”‚ {                                                  â”‚
â”‚   "template_id": "T001",                           â”‚
â”‚   "fields": {                                      â”‚
â”‚     "timestamp": [1117962424, 1117962425],         â”‚
â”‚     "severity": [0, 1]                             â”‚
â”‚   }                                                â”‚
â”‚ }                                                  â”‚
â”‚                                                     â”‚
â”‚ MessagePack binary format (47 bytes):              â”‚
â”‚ 0x82              # Map with 2 keys                â”‚
â”‚ 0xAB "template_id" 0xA4 "T001"                     â”‚
â”‚ 0xA6 "fields" 0x82                                 â”‚
â”‚   0xA9 "timestamp" 0x92                            â”‚
â”‚     0xCE 0x42... 0xCE 0x42...                      â”‚
â”‚   0xA8 "severity" 0x92 0x00 0x01                   â”‚
â”‚                                                     â”‚
â”‚ Compression ratio: 89 / 47 = 1.89Ã—                 â”‚
â”‚                                                     â”‚
â”‚ ğŸ”§ Advantages: Compact integers, no quotes,        â”‚
â”‚    fast parsing, preserves structure               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Stage 3 Output Box (Bottom)

**Box Style**: White background, thick green border (#27AE60, 4px solid)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¦ COLUMNAR ENCODING RESULTS (Apache dataset)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Original log file:        4.75 MB                    â”‚
â”‚ After token pool:         ~4.6 MB (1.03Ã—)           â”‚
â”‚ After delta encoding:     ~4.2 MB (1.13Ã—)           â”‚
â”‚ After dictionary:         ~3.2 MB (1.48Ã—)           â”‚
â”‚ After varint:             ~2.1 MB (2.26Ã—)           â”‚
â”‚ After RLE v2:             ~1.9 MB (2.50Ã—)           â”‚
â”‚ After MessagePack:        1.65 MB (2.88Ã—)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¯ Stage 3 Compression: 2.88Ã— reduction            â”‚
â”‚ ğŸ“Š Cumulative so far: 4.75 MB â†’ 1.65 MB             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Arrow to Next Stage
- **Style**: Thick black arrow (8px)
- **Label above**: "Binary-encoded columnar data"
- **Label below**: "Ready for final compression"

---

## Stage 4: Compression Pipeline (Center-Right)

### Visual Layout
- **Main Box**: Dashed red border (#E74C3C, 3px dashed)
- **Title**: "Final Compression Pipeline"
- **Background**: Light gray (#F8F9FA)
- **Dimensions**: 300px width Ã— 600px height

### Sub-Stage 4.1: Zstandard Compression

**Box Style**: Light blue background (#EBF5FB)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘  ZSTANDARD COMPRESSION (Level 15)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Algorithm: LZ77 + FSE entropy coding               â”‚
â”‚                                                     â”‚
â”‚ How Zstandard works:                               â”‚
â”‚                                                     â”‚
â”‚ Phase 1: LZ77 Dictionary                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚ Find repeated byte sequences          â”‚           â”‚
â”‚ â”‚ Replace with (distance, length)       â”‚           â”‚
â”‚ â”‚ Example: "Built with" Ã— 500 times     â”‚           â”‚
â”‚ â”‚ â†’ Store once, reference 499 times     â”‚           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                     â”‚
â”‚ Phase 2: FSE Entropy Coding                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚ Compress literals and pointers using  â”‚           â”‚
â”‚ â”‚ Finite State Entropy (ANS variant)    â”‚           â”‚
â”‚ â”‚ More efficient than Huffman for CPUs  â”‚           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                     â”‚
â”‚ Input:  1.28 MB (MessagePack)                      â”‚
â”‚ Output: 308 KB (Zstd-15)                           â”‚
â”‚                                                     â”‚
â”‚ Compression ratio: 1.28 / 0.308 = 4.16Ã—            â”‚
â”‚ Speed: 86.5 MB/s (compression)                     â”‚
â”‚                                                     â”‚
â”‚ ğŸ“š Reference: RFC 8878 (Zstandard specification)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Arrow down** with label: "Optionally apply universal dictionary"

### Sub-Stage 4.2: Universal Dictionary Training (Optional)

**Box Style**: Light yellow background (#FFFDE7), dashed border

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¡ UNIVERSAL ZSTD DICTIONARY (Optional)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Algorithm: Train dictionary on corpus samples      â”‚
â”‚                                                     â”‚
â”‚ Problem: Generic Zstd doesn't know log patterns    â”‚
â”‚                                                     â”‚
â”‚ Solution: Train on all datasets:                   â”‚
â”‚ $ zstd --train datasets/*/*.log \                  â”‚
â”‚   -o logsim_universal.dict --maxdict=10240         â”‚
â”‚                                                     â”‚
â”‚ Dictionary learns frequent patterns:               â”‚
â”‚ â€¢ "[" (93,521 occurrences)                         â”‚
â”‚ â€¢ "ERROR" (8,234 occurrences)                      â”‚
â”‚ â€¢ "INFO" (12,489 occurrences)                      â”‚
â”‚ â€¢ "proxy.cse.cuhk.edu.hk" (4,231 times)           â”‚
â”‚                                                     â”‚
â”‚ Results:                                            â”‚
â”‚ Without dict: 308 KB                               â”‚
â”‚ With dict:    299 KB (+ 10 KB dict overhead)       â”‚
â”‚                                                     â”‚
â”‚ Improvement: +3.0% compression ratio               â”‚
â”‚ Cost: 10 KB overhead (amortized over multiple logs)â”‚
â”‚                                                     â”‚
â”‚ âœ… Use when: Compressing >10 files from same sourceâ”‚
â”‚ âŒ Skip when: Single small files (<100 KB)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Stage 4 Output Box (Bottom)

**Box Style**: White background, thick green border (#27AE60, 4px solid)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ† FINAL COMPRESSION RESULTS (Apache dataset)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Configuration              Ratio      Speed (MB/s) â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Baseline (gzip -9)         ~3.2Ã—      N/A          â”‚
â”‚ LogSim (Columnar + Zstd-15) 8.32Ã—     1.26         â”‚
â”‚ + Universal Dict           ~8.6Ã—      1.24 (-2%)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¯ Production config:  8.32Ã— at 1.26 MB/s         â”‚
â”‚ ğŸ¯ With universal dict: ~8.6Ã— at 1.24 MB/s        â”‚
â”‚                                                     â”‚
â”‚ ğŸ“ˆ Improvement over gzip-9: 2.6Ã— better compression â”‚
â”‚ ğŸ“Š vs gzip-9 efficiency: 39.2%                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Arrow to Next Stage
- **Style**: Thick black arrow (8px)
- **Label above**: "Compressed .lsc file"
- **Label below**: "4.75 MB â†’ 584 KB = 8.32Ã—"

---

## Stage 5: Queryable Storage & Query Engine (Right Side)

### Visual Layout
- **Main Box**: Dashed red border (#E74C3C, 3px dashed)
- **Title**: "Queryable Storage & Query Engine"
- **Background**: Light gray (#F8F9FA)
- **Dimensions**: 350px width Ã— 600px height

### Sub-Stage 5.1: Compressed File Format

**Box Style**: White background

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘  COMPRESSED FILE FORMAT (.lsc)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Header (64 bytes):                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Magic: "LOGSIM\x01\x00"           (8 bytes)     â”‚ â”‚
â”‚ â”‚ Version: 1                        (4 bytes)     â”‚ â”‚
â”‚ â”‚ Flags: BWT|Dict enabled           (4 bytes)     â”‚ â”‚
â”‚ â”‚ Original size: 5,242,880          (8 bytes)     â”‚ â”‚
â”‚ â”‚ Compressed size: 315,392          (8 bytes)     â”‚ â”‚
â”‚ â”‚ Template count: 16                (4 bytes)     â”‚ â”‚
â”‚ â”‚ Checksum (CRC32)                  (4 bytes)     â”‚ â”‚
â”‚ â”‚ Reserved                          (24 bytes)    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚ Template Index (variable):                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Template T001:                                  â”‚ â”‚
â”‚ â”‚   UUID: 4a3b9c...                               â”‚ â”‚
â”‚ â”‚   Offset: 512 bytes                             â”‚ â”‚
â”‚ â”‚   Size: 38,144 bytes                            â”‚ â”‚
â”‚ â”‚   Rows: 42,351                                  â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Template T002: ...                              â”‚ â”‚
â”‚ â”‚ Template T003: ...                              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚ Compressed Data Blocks:                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Block 1: Template T001 data (Zstd compressed)  â”‚ â”‚
â”‚ â”‚ Block 2: Template T002 data (Zstd compressed)  â”‚ â”‚
â”‚ â”‚ ...                                             â”‚ â”‚
â”‚ â”‚ Block N: Template TN data (Zstd compressed)    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚ Footer:                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Index offset: 308,224  (8 bytes)                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Sub-Stage 5.2: Query Planning

**Box Style**: Light yellow background (#FFFDE7)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¡ QUERY PLANNING (Optimization)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Algorithm: Predicate pushdown + Column pruning     â”‚
â”‚                                                     â”‚
â”‚ Example Query:                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ SELECT timestamp, severity, message             â”‚ â”‚
â”‚ â”‚ WHERE severity = 'ERROR'                        â”‚ â”‚
â”‚ â”‚   AND timestamp >= '2005-06-09 06:00:00'        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚ Optimization Steps:                                â”‚
â”‚                                                     â”‚
â”‚ 1ï¸âƒ£ Column Pruning:                                 â”‚
â”‚    Only decompress: timestamp, severity, message   â”‚
â”‚    Skip: component, process_id, ip_address         â”‚
â”‚                                                     â”‚
â”‚ 2ï¸âƒ£ Predicate Pushdown:                             â”‚
â”‚    Evaluate filters DURING decompression           â”‚
â”‚    (not after loading all data into memory)        â”‚
â”‚                                                     â”‚
â”‚ 3ï¸âƒ£ Selectivity Ordering:                           â”‚
â”‚    severity='ERROR' (5% of logs) â†’ Check first     â”‚
â”‚    timestamp>='...' (30% of logs) â†’ Check second   â”‚
â”‚                                                     â”‚
â”‚ 4ï¸âƒ£ Template Filtering:                             â”‚
â”‚    Only decompress templates with severity field   â”‚
â”‚    (Templates T001, T002, T003 out of 16 total)   â”‚
â”‚                                                     â”‚
â”‚ Query Plan:                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Templates: [T001, T002, T003] (3/16)            â”‚ â”‚
â”‚ â”‚ Columns: [timestamp, severity, message]         â”‚ â”‚
â”‚ â”‚ Predicates: [severity='ERROR', timestamp>=...]  â”‚ â”‚
â”‚ â”‚ Estimated rows: 2,500 / 52,483                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Sub-Stage 5.3: Partial Decompression

**Box Style**: Light blue background (#E3F2FD)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘¢ PARTIAL DECOMPRESSION (Columnar Access)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Algorithm: Decompress only needed columns          â”‚
â”‚                                                     â”‚
â”‚ Traditional approach (SLOW):                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 1. Decompress ALL columns                       â”‚ â”‚
â”‚ â”‚    (timestamp, severity, component,             â”‚ â”‚
â”‚ â”‚     process_id, ip_address, message)            â”‚ â”‚
â”‚ â”‚ 2. Apply filters                                â”‚ â”‚
â”‚ â”‚ 3. Discard 95% of rows                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ Time: 150 ms                                        â”‚
â”‚                                                     â”‚
â”‚ LogSim approach (FAST):                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 1. Decompress filter columns ONLY               â”‚ â”‚
â”‚ â”‚    (timestamp, severity)                        â”‚ â”‚
â”‚ â”‚ 2. Apply filters â†’ Get matching row IDs         â”‚ â”‚
â”‚ â”‚ 3. For matching rows (5%), decompress message   â”‚ â”‚
â”‚ â”‚ 4. Return results                               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ Time: 20 ms                                         â”‚
â”‚                                                     â”‚
â”‚ ğŸš€ Speedup: 150 / 20 = 7.5Ã—                        â”‚
â”‚                                                     â”‚
â”‚ Key insight: Columnar storage allows independent   â”‚
â”‚ decompression of each field type!                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Sub-Stage 5.4: Memory-Mapped I/O

**Box Style**: Light green background (#E8F5E9)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â‘£ MEMORY-MAPPED I/O (Zero-Copy Access)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Algorithm: Map file pages directly to process memoryâ”‚
â”‚                                                     â”‚
â”‚ Traditional file I/O:                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   File   â”‚  â†’   â”‚  Kernel   â”‚  â†’   â”‚  User    â”‚ â”‚
â”‚ â”‚          â”‚ read â”‚  Buffer   â”‚ copy â”‚  Buffer  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ 2 copies, syscall overhead                         â”‚
â”‚                                                     â”‚
â”‚ Memory-mapped I/O:                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚   File   â”‚  â”€â”€â”€â”€ mmap() â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ Process  â”‚  â”‚
â”‚ â”‚  Pages   â”‚                        â”‚  Memory  â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ Zero-copy, OS handles paging                       â”‚
â”‚                                                     â”‚
â”‚ Benefits:                                           â”‚
â”‚ â€¢ 2-3Ã— faster for random access                    â”‚
â”‚ â€¢ OS page cache automatically used                 â”‚
â”‚ â€¢ No manual buffer management                      â”‚
â”‚                                                     â”‚
â”‚ Implementation:                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ mm = mmap.mmap(file.fileno(), 0,                â”‚ â”‚
â”‚ â”‚               access=mmap.ACCESS_READ)          â”‚ â”‚
â”‚ â”‚                                                 â”‚ â”‚
â”‚ â”‚ # Read template block (zero-copy)              â”‚ â”‚
â”‚ â”‚ mm.seek(template_offset)                        â”‚ â”‚
â”‚ â”‚ block = mm.read(template_size)                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Stage 5 Output Box (Bottom)

**Box Style**: White background, thick green border (#27AE60, 4px solid)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš¡ QUERY PERFORMANCE RESULTS                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Query Type                     Speedup vs. Full    â”‚
â”‚                                Decompression        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ Single field (timestamp)       800Ã—                â”‚
â”‚   â€¢ Index lookup, no decompress                    â”‚
â”‚                                                     â”‚
â”‚ Single field (severity)        200Ã—                â”‚
â”‚   â€¢ Dictionary lookup only                         â”‚
â”‚                                                     â”‚
â”‚ Two fields (time + severity)   150Ã—                â”‚
â”‚   â€¢ Partial columnar access                        â”‚
â”‚                                                     â”‚
â”‚ All fields (SELECT *)          14.7Ã—               â”‚
â”‚   â€¢ Full decompression needed                      â”‚
â”‚                                                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ Average query latency: 20-150 ms (vs. 1-30 seconds â”‚
â”‚ for decompressing entire 5.2 MB file)              â”‚
â”‚                                                     â”‚
â”‚ ğŸ¯ Key Innovation: Queryable compression           â”‚
â”‚    (not just compression-only like LogZip)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Complete Pipeline Summary (Birds-Eye View)

### Overall Metrics Table

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LOGSIM PIPELINE - COMPLETE SYSTEM OVERVIEW                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  INPUT: 497,741 logs from 5 datasets (99.6 MB uncompressed)                â”‚
â”‚                                                                             â”‚
â”‚  Stage 1: Template Extraction                                              â”‚
â”‚  â”œâ”€ Tokenization: Delimiter-based + bracket matching                       â”‚
â”‚  â”œâ”€ Semantic Classification: 15 type categories, regex patterns            â”‚
â”‚  â”œâ”€ Custom Alignment: Position-by-position field alignment                 â”‚
â”‚  â””â”€ Template Consolidation: Signature-based deduplication                  â”‚
â”‚  Output: 98 unique templates (100% automatic discovery)                    â”‚
â”‚                                                                             â”‚
â”‚  Stage 2: Columnar Encoding                                                â”‚
â”‚  â”œâ”€ Field Extraction: Template-guided parsing                              â”‚
â”‚  â”œâ”€ Delta Encoding: 8Ã— compression on timestamps                           â”‚
â”‚  â”œâ”€ Zigzag + Varint: 4Ã— compression on integers                            â”‚
â”‚  â”œâ”€ Dictionary Encoding: 7Ã— compression on low-cardinality fields          â”‚
â”‚  â”œâ”€ RLE v2: 2.6Ã— compression on patterns                                   â”‚
â”‚  â””â”€ MessagePack: 1.89Ã— compression (binary serialization)                  â”‚
â”‚  Output: 4.06Ã— reduction (99.6 MB â†’ 24.5 MB)                               â”‚
â”‚                                                                             â”‚
â”‚  Stage 3: Final Compression                                                â”‚
â”‚  â”œâ”€ Zstandard-15: 4.16Ã— compression (LZ77 + FSE entropy)                   â”‚
â”‚  â””â”€ Universal Dict: +3.0% improvement (10 KB trained dictionary)           â”‚
â”‚  Output: 16.88Ã— total compression (99.6 MB â†’ 5.9 MB)                       â”‚
â”‚                                                                             â”‚
â”‚  Stage 4: Query Engine                                                     â”‚
â”‚  â”œâ”€ Query Planning: Predicate pushdown + column pruning                    â”‚
â”‚  â”œâ”€ Partial Decompression: Only needed columns                             â”‚
â”‚  â”œâ”€ Memory-Mapped I/O: Zero-copy file access                               â”‚
â”‚  â””â”€ Bitmap Indexing: Fast row filtering                                    â”‚
â”‚  Output: 7.5-800Ã— query speedup vs. full decompression                     â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                             â”‚
â”‚  ğŸ† KEY ACHIEVEMENTS:                                                       â”‚
â”‚  â€¢ 16.88Ã— compression ratio (27% better than gzip-9)                       â”‚
â”‚  â€¢ 8.7 MB/s compression speed (real-time capable)                          â”‚
â”‚  â€¢ 6-800Ã— query speedup (queryable without full decompression)             â”‚
â”‚  â€¢ 100% automatic schema discovery (no manual configuration)               â”‚
â”‚  â€¢ Lossless compression (exact reconstruction)                             â”‚
â”‚                                                                             â”‚
â”‚  ğŸ¯ INNOVATION: Semantic-aware columnar compression                         â”‚
â”‚     Bridges gap between log parsing (analysis-focused) and                 â”‚
â”‚     database compression (structured data-focused)                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Color Palette & Styling Guide

### Colors for Different Components

```
Dataset Colors (borders):
  Apache:    #FF8C42 (Orange)
  HealthApp: #4A90E2 (Blue)
  Zookeeper: #7ED321 (Green)
  OpenStack: #F5A623 (Yellow)
  Proxifier: #BD10E0 (Purple)

Pipeline Stage Colors:
  Main boxes:           #E74C3C (Red dashed border)
  Background:           #F8F9FA (Light gray)
  Sub-stage colors:
    - Tokenization:     #FFF9E6 (Light yellow)
    - Classification:   #E8F4F8 (Light blue)
    - Clustering:       #FFF9E6 (Light yellow)
    - Consolidation:    #E8F8F5 (Light green)
    - Delta:            #FFF3E0 (Light orange)
    - Varint:           #E3F2FD (Light blue)
    - Dictionary:       #F3E5F5 (Light purple)
    - RLE:              #E8F5E9 (Light green)
    - MessagePack:      #E0F7FA (Light cyan)
    - Zstandard:        #EBF5FB (Light blue)

Output Boxes:
  Success/Results:  #27AE60 (Green border, 4px solid)
  Optional:         #F39C12 (Orange dashed border)
```

### Typography

```
Titles:           18pt bold, sans-serif
Section headers:  14pt bold, sans-serif
Body text:        11pt regular, sans-serif
Code/logs:        10pt monospace (Courier New, Consolas)
Metrics:          12pt bold, colored (#E74C3C for ratios)
Icons:            16pt emoji or Font Awesome
```

### Box Styling

```
Main Stage Boxes:
  - Border: 3px dashed #E74C3C
  - Background: #F8F9FA
  - Border radius: 8px
  - Padding: 20px
  - Shadow: 0 2px 4px rgba(0,0,0,0.1)

Sub-Stage Boxes:
  - Border: 2px solid #CCCCCC
  - Background: (varies by type, see colors above)
  - Border radius: 6px
  - Padding: 15px
  - Shadow: none

Output Boxes:
  - Border: 4px solid #27AE60
  - Background: #FFFFFF
  - Border radius: 8px
  - Padding: 15px
  - Shadow: 0 4px 8px rgba(0,0,0,0.15)

Optional Boxes:
  - Border: 2px dashed #F39C12
  - Background: #FFFDE7
  - Border radius: 6px
  - Padding: 15px
```

### Arrows

```
Main pipeline arrows:
  - Width: 8px
  - Color: #2C3E50 (dark gray/black)
  - Style: Solid
  - Arrowhead: Filled triangle

Optional path arrows:
  - Width: 4px
  - Color: #F39C12 (orange)
  - Style: Dashed (5px dash, 3px gap)
  - Arrowhead: Outlined triangle

Labels on arrows:
  - Position: Above arrow (input description)
              Below arrow (metrics/stats)
  - Font: 10pt italic, gray (#7F8C8D)
```

---

## Tools & Export Settings

### Recommended Tool: Draw.io (diagrams.net)

**Why**: Free, web-based, excellent for technical diagrams

**Settings**:
```
Canvas size: 2000px Ã— 800px (landscape)
Grid: 10px spacing, snap enabled
Export: PNG at 2Ã— resolution (300 DPI for thesis)
Format: Transparent background for flexibility
```

### Alternative: Figma

**Why**: Professional, collaborative, component-based

**Settings**:
```
Frame: 2000 Ã— 800px
Components: Create reusable box templates
Export: PNG @2x or SVG (vector)
Plugins: Use "Content Reel" for dummy data
```

### Quick Start Steps

1. **Create main stage boxes** (5 boxes, dashed red borders)
2. **Add dataset boxes** in Stage 1 (5 colored boxes with stats)
3. **Fill sub-stages** for each main stage (nested boxes)
4. **Add arrows** between stages (thick black, labeled)
5. **Insert metrics** (compression ratios, speeds, counts)
6. **Add icons** (âš¡, ğŸ“Š, ğŸ¯, âš™ï¸, etc.)
7. **Export** at 2Ã— resolution for thesis inclusion

---

This specification provides everything needed to create a professional, clear architecture diagram for your LogSim thesis!

**Main Box**: Dashed red border (like LogLite's L-Windows box)

**Title**: "Template Extraction Engine"

**Sub-components** (stacked vertically inside):

1. **Tokenizer**
   - Small box with sample: `[Thu Jun 09] [notice] LDAP: Built with OpenLDAP`
   - Arrow pointing down

2. **Semantic Classifier**
   - Show 15 semantic types as small colored tags:
     - `TIMESTAMP` (clock icon)
     - `SEVERITY` (alert icon)
     - `IP_ADDRESS` (network icon)
     - `PROCESS_ID` (gear icon)
     - `MESSAGE` (text icon)
   - Arrow pointing down

3. **Template Generator**
   - Show alignment example:
     ```
     logâ‚: [TIMESTAMP] [SEVERITY] LDAP: Built with OpenLDAP
     logâ‚‚: [TIMESTAMP] [SEVERITY] LDAP: SSL support unavailable
     â†“
     Template: [TIMESTAMP] [SEVERITY] LDAP: [MESSAGE]
     ```
   - Arrow pointing down

4. **Template Matching**
   - Box showing: "16 templates extracted" (with small count badge)
   - Arrow pointing right to next component

---

### Component 3: Columnar Encoding (Center)

**Main Box**: Dashed red border

**Title**: "Category-Aware Columnar Encoding"

**Sub-components** (stacked vertically):

1. **Field Extraction**
   - Show table-like structure:
     ```
     Template ID | Timestamps    | Severities | Messages
     T001        | [tâ‚, tâ‚‚, ...] | [sâ‚, sâ‚‚]   | [mâ‚, mâ‚‚]
     T002        | [tâ‚ƒ, tâ‚„, ...] | [sâ‚ƒ, sâ‚„]   | [mâ‚ƒ, mâ‚„]
     ```

2. **Delta Encoding** (for timestamps)
   - Visual: Timeline with deltas
     ```
     1715875200 â†’ Î”â‚=5 â†’ Î”â‚‚=3 â†’ Î”â‚ƒ=7 â†’ ...
     ```
   - Label: "24Ã— compression"

3. **Dictionary Encoding** (for severities/IPs)
   - Visual: Dictionary table
     ```
     0 â†’ "ERROR"
     1 â†’ "INFO"
     2 â†’ "WARN"
     ```
   - Array: `[0, 1, 0, 2, 1, ...]`
   - Label: "6Ã— compression"

4. **Varint Encoding**
   - Show byte reduction:
     ```
     4 bytes â†’ 1-2 bytes
     ```

5. **RLE v2** (Run-Length Encoding)
   - Pattern example:
     ```
     [1,2,3,1,2,3,1,2,3] â†’ pattern=[1,2,3] repeat=3
     ```

**Arrow**: Point right to Compression component

---

### Component 4: Binary Serialization & Compression (Center-Right)

**Main Box**: Dashed red border

**Title**: "Compression Pipeline"

**Sub-components** (stacked vertically):

1. **MessagePack**
   - Icon: Binary file with "msgpack" label
   - Show: `JSON-like dict â†’ binary bytes`
   - Label: "2.14Ã— compression"

2. **Universal Zstd Dictionary**
   - Icon: Book/dictionary icon
   - Label: "10KB trained dict"
   - Show: "+2.7% improvement"

3. **Zstandard Compression**
   - Icon: Compress/zip icon
   - Label: "Level 15, 86.5 MB/s"
   - Show final ratio: "16.91Ã—"

**Optional Branch** (dotted line):
- **BWT Preprocessing** (shown as optional path)
  - Label: "+4.3% (15Ã— slower)" 
  - Icon: Transform/shuffle icon

**Arrow**: Point right to Storage component

---

### Component 5: Storage & Query Engine (Right Side)

**Main Box**: Dashed red border

**Title**: "Queryable Storage"

**Sub-components**:

1. **Compressed Files** (top)
   - Show file icons with headers:
     ```
     ğŸ“„ apache.lsc (38KB)
     ğŸ“„ healthapp.lsc (112KB)
     ğŸ“„ zookeeper.lsc (15KB)
     ```

2. **Query Indexes** (middle)
   - Show columnar index structure:
     ```
     Timestamp Index: [tâ‚â†’logâ‚€, tâ‚‚â†’logâ‚, ...]
     Severity Index:  [ERRORâ†’[0,5,9], INFOâ†’[1,2,3]]
     IP Index:        [192.168.1.1â†’[0,2], ...]
     ```
   - Label: "6-800Ã— query speedup"

3. **Partial Decompression** (bottom)
   - Show selective field extraction:
     ```
     Query: SELECT timestamp, severity WHERE severity='ERROR'
     â†“
     Decompress: Only timestamp + severity columns
     ```
   - Label: "Memory-mapped I/O"

---

## Color Coding & Styling

**Follow LogLite's style**:

1. **Boxes with dashed red borders** for major pipeline stages
2. **Orange boxes** for data items being processed (logs, encoded data)
3. **Blue boxes** for preserved/special items (like anchor logs)
4. **White boxes with headers** for compressed output
5. **Arrows**: Thick black arrows between components
6. **Icons**: Use simple icons (clock, alert, network, file, cloud)

---

## Layout Dimensions (Suggested)

**Canvas size**: 1400px Ã— 800px (landscape)

**Component widths**:
- Input sources: 150px
- Schema extraction: 300px
- Columnar encoding: 350px
- Compression: 250px
- Storage/Query: 300px
- Cloud: 150px

**Vertical spacing**: 
- Main boxes: 600px height
- Sub-components: 80-100px each with 20px padding

---

## Text Labels to Include

**Key metrics** (add small badges near components):
- "16 templates" (near template generator)
- "24Ã— delta" (near delta encoding)
- "6Ã— dictionary" (near dictionary encoding)
- "16.91Ã— compression" (near final output)
- "6-800Ã— query speedup" (near query engine)

**Time/resource info** (bottom of boxes):
- "8.7 MB/s" (compression speed)
- "O(nÃ—m) complexity" (template extraction)
- "497K logs processed" (overall)

---

## Tools to Use for Design

**Recommended tools**:
    **Figma** (professional, free tier)
   - Use components for reusable boxes
   - Export: PNG at 2Ã— resolution
---

## Example Structure in Text Form

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚    â”‚   TEMPLATE EXTRACTION        â”‚    â”‚  COLUMNAR ENCODING  â”‚
â”‚ Log Sources â”‚â”€â”€â”€â–¶â”‚   1. Tokenizer              â”‚â”€â”€â”€â–¶â”‚  â€¢ Delta Encoding   â”‚
â”‚             â”‚    â”‚   2. Semantic Classifier    â”‚    â”‚  â€¢ Dictionary       â”‚
â”‚ â€¢ Apache    â”‚    â”‚   3. Template Generator     â”‚    â”‚  â€¢ Varint           â”‚
â”‚ â€¢ HealthApp â”‚    â”‚   4. Template Matching      â”‚    â”‚  â€¢ RLE v2           â”‚
â”‚ â€¢ Zookeeper â”‚    â”‚                              â”‚    â”‚                     â”‚
â”‚ â€¢ OpenStack â”‚    â”‚   Output: 16 templates       â”‚    â”‚  4.05Ã— reduction    â”‚
â”‚ â€¢ Proxifier â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
                                                                â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   COMPRESSION PIPELINE       â”‚    â”‚  STORAGE & QUERY    â”‚
                    â”‚   1. MessagePack (2.14Ã—)    â”‚â”€â”€â”€â–¶â”‚  â€¢ Compressed files â”‚
                    â”‚   2. Zstandard-15 (4.18Ã—)   â”‚    â”‚  â€¢ Query indexes    â”‚
                    â”‚   3. Universal Dict (+2.7%) â”‚    â”‚  â€¢ Partial decomp   â”‚
                    â”‚                              â”‚    â”‚  6-800Ã— speedup     â”‚
                    â”‚   Final: 16.91Ã— compression  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This guide should help you create a professional architecture diagram similar to LogLite's style but adapted for LogSim's semantic compression approach! The key is showing the **pipeline flow** with **dashed boxes for stages**, **colored data items**, and **clear metric labels**.